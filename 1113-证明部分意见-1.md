严格评审意见
======

一、总体评价
------

本稿在**问题设置**上有创新意义，但在**理论严谨性、实验验证、以及工程可落地性**上存在多个重大问题。以下按优先级给出修改意见。

* * *

二、核心理论问题（必须修正）
--------------

### 问题 1：定理 2.4（Token-Logit 线性衰减）的假设条件过强

**现状：** 定理声称 $\Delta Z_{KGW}(\gamma) = C_{linear} \cdot \gamma$

**主要缺陷：**

* "均匀词元替换"假设与实际释义攻击严重不符。真实 paraphrase 模型（如 GPT-3.5、T5）会集中修改低频词和风格词，而非均匀分布
* 缺乏对"非均匀替换如何破坏线性关系"的分析
* 推论 2.3 的逻辑跳跃：从"$p_{replace} \propto \gamma_{attack}$"直接推导 $\Delta Z \propto \gamma$，忽略了对数线性性中的非线性交互项

**修改建议：**

1. **补充引理 2.2'**（实际释义攻击模型）：
    引理 2.2'：设释义攻击采用基于 paraphrase 模型的替换。
    令 f(w) = P(词w被替换)，θ = 编辑距离/长度。则：
    E[△Z] = ∑_w∈G f(w)·1 + ∑_w∉G f(w)·0
   
          = ∑_{w∈G,freq(w)<median} f(w) + O(θ²)
   
    在非均匀替换下，存在修正项 g(θ) 使得：
    E[△Z] = C_linear·γ + g(θ)·γ^{3/2} + ...
    其中 g(θ) 取决于替换集中度（Gini系数）。

2. **明确假设范围**：
   * 定理 2.4 仅适用于"最坏情况均匀攻击"，不适用于真实 paraphrase
   * 添加实验数据对比：KGW 在 GPT-3.5 paraphrase 下的实际衰减曲线

* * *

### 问题 2：定理 4.4（MoE 次线性衰减）缺少关键链路

**现状：**

* 步骤 2 声称"由 Lipschitz 性质"得到 $|p'_i - p_i|_{TV} \leq L_g \cdot |D(X') - D(X)|_{TV}$
* 但这是**从分布函数差到激活分布差的跳跃**，忽略了以下问题：

**关键漏洞：**

1. **激活函数非线性性**：gating 网络是 $\text{softmax}(\text{MLP}(x))$，其传播不能简单用 Lipschitz 常数刻画。特别地：
   
   * Top-k 操作产生的激活分布是**离散的**，其对输入扰动的响应有不连续性
   * Pinsker 不等式（定理 4.1）要求连续分布，对离散激活模式的适用性未证明

2. **Gating logit 修改与激活概率的非单调关系**：
   
   * 定义 3.3 中 $\epsilon \approx \frac{1}{2}|\Delta \ell|_2^2$ 的推导完全缺失
   * Top-2 激活中，某个专家的 logit 改变 0.1 nats，其被激活概率的改变取决于**与其他专家的相对排名**，不是单调的

**修改建议：**
    新引理 4.4'（离散激活分布的 Pinsker 推广）：

    对 Top-k softmax 激活模式 S ∈ {0,1}^K，定义：
      p(S|x) = softmax([ℓ_1(x), ..., ℓ_K(x)])_{top-k}

    设 ℓ'(x) = ℓ(x) + Δℓ(x)，则激活概率变化满足：

      |p(S|x') - p(S|x)| ≤ f_k(S) · ||Δℓ||_2

    其中 f_k(S) 是依赖于排名位置的系数：
      - 若 S 中的专家在排名中"稳定"（相对距离 > threshold），f_k(S) ≈ O(1)
      - 若排名接近（距离 < threshold），f_k(S) ≈ O(1/gap)，可能很大

    因此，在最坏情况下（排名交叉），L_g 可能显著大于 2。

3. **需要补充实验验证**：在 LLaMA-MoE 上直接测量 L_g 的实际分布（第 7.1 节方法可行，但本文缺数据）

* * *

### 问题 3：推论 4.5 中 $D^*_{adv} \geq d_0 - C\sqrt{\gamma}d_0$ 的界过松

**现状：** 声称"$D^* \geq d_0(1 - C\sqrt{\gamma})$ 仍 > 0"

**问题：**

* 当 $\gamma = 0.03$，$C = 1.5$，$d_0 = 0.1$ 时：$$D^*_{adv} \geq 0.1(1 - 1.5\sqrt{0.03}) = 0.1(1 - 0.26) = 0.074$$
* 但这个下界来自于**两次独立的松弛**（Pinsker + Chernoff 稳定性），实际衰减可能接近 $0.074/0.1 = 26%$ 还要更严

**修改建议：**

1. **需要补充紧界分析**（Tightness analysis）：
   
   * 构造具体的攻击例子，显示下界何时达到
   * 对比理论预测与实验数据的 gap

2. **改进第 4.3 节**，分解两个松弛来源：

    松弛 1（Pinsker）：
      ||D(X') - D(X)||_TV ≤ √(γ/2)
    
    松弛程度：通常是 √2 倍的松弛
      实际 TV 距离可通过 Bhattacharyya 系数得到更紧的界
    
    松弛 2（Chernoff 稳定性）：
      |D*(p', q') - D*(p,q)| ≤ C_stab(δ_p + δ_q)√D*
    
    松弛程度：C_stab = 1 的证明基于 Hölder 不等式，
      在高维情况下 C_stab 的实际值需实验标定

* * *

三、实验验证缺陷（致命）
------------

### 问题 4：第 6 节"定量预测"完全缺乏实验验证

**现状：**

* 预测 1：KGW 在 $\gamma \approx 0.03$ 失效
* 预测 2：MoE 在同条件下需 255 个样本仍可检测
* **但无任何实验数据支撑**

**必须补充的实验：**

1. **对比实验**（Table 1 风格）：
    ┌─────────────────┬──────────────┬──────────┬─────────────┐
    │ 攻击强度 γ      │ 范式         │ 理论预测 │ 实验测得    │
    ├─────────────────┼──────────────┼──────────┼─────────────┤
    │ 0.01            │ KGW (Token)  │ Z=4.5   │ Z=4.6±0.3  │
    │                 │ MoE (Expert) │ D*=0.09 │ D*=0.088   │
    │ 0.03            │ KGW          │ Z=0.0   │ Z=0.2±0.5  │
    │                 │ MoE          │ D*=0.02 │ D*=0.018   │
    │ 0.05            │ KGW          │ Z<0     │ X (失败)   │
    │                 │ MoE          │ D*>0    │ D*=0.008   │
    └─────────────────┴──────────────┴──────────┴─────────────┘

2. **攻击强度 γ 的实际测量**：
   
   * 对不同释义模型（GPT-3.5, T5, Pegasus）和编辑距离水平，直接计算 $D_{KL}(D(X')|D(X))$
   * 验证第 7.4 节"编辑距离上界"是否正确：$\gamma \approx \frac{L \log|V|}{N}$ 在实践中是否成立？

3. **Lipschitz 常数验证**（第 7.1 节标定方法）：
   
   * 在 5-10 个代表性模型（LLaMA-7B-MoE, Mixtral, DeepSeek-MoE）上测量 $L_g$
   * 统计分布：最大值、95% 分位数、均值
   * 验证"$L_g \approx 2$"的假设是否普遍成立

* * *

四、工程可落地性问题
----------

### 问题 5：参数 C 的"经验值"缺乏系统标定

**现状：** 第 5.3 节说"$C \approx 1.5-2.0$"，但：

* 无标定数据
* 无对不同模型规模、架构的依赖性分析
* 第 7.2 节的标定步骤（3-4 步）完全空白，只有文字描述

**修改建议：**

1. **补充标定实验**：
    对每个模型 M 和 对手能力参数 γ：
      Step 1: 生成 100+ 对 (x, x') 满足 ED(x,x') ≤ L
      Step 2: 计算 γ_i = D_KL(D(x'_i)||D(x_i))
      Step 3: 计算激活分布变化 δ_i = ||p'(e|x'_i) - p(e|x_i)||_TV
      Step 4: 拟合 δ_i ≈ C_prop · √γ_i → C_prop
      Step 5: 通过 LLR 检验，计算实际 D*_{adv} 与理论预测的比值
      Step 6: 回推 C_stability 和综合 C

2. **构建查表**（Model Calibration Table）：
    Model                  Experts  Activation  L_g      C_prop    C      c_min
    LLaMA-7B-MoE          8        top-2       2.1      1.48      2.20   2.2
    LLaMA-70B-MoE         64       top-8       1.9      1.35      2.02   2.0
    Mixtral-8x7B          8        top-2       2.4      1.70      2.55   2.6
    DeepSeek-MoE-16B      16       top-6       2.2      1.55      2.33   2.3

* * *

### 问题 6：安全系数 c 的"最优性"定义不清

**现状：** 定理 5.5 定义$$c^* = \arg\min_c [n^*(γ,c) + λ\Delta A(c)]$$

**问题：**

* $\Delta A(c)$ 与 $c$ 的关系完全未给出（应该是什么函数？）
* $λ$ 如何选择？不同应用场景不同
* "通常 $c^* \in [C, 2.5C]$"是凭经验说的吗？需要理论或实验依据

**修改建议：**

1. **显式给出 $\Delta A(c)$ 的模型**：
    假设 gating network 修改强度与 c 线性关系：
      Δℓ = c · Δℓ_0  (Δℓ_0 是某个基准修改)
    模型精度下降应该是 c 的增函数，形式如：
      ΔA(c) = a·c^p + b·c^q
    其中 a, b, p, q 由在验证集上的扫参实验决定。
    通常 p ∈ [1, 2]，q ∈ [2, 3]。

2. **给出 λ 的选择指南**：
    应用场景          优先级        推荐 λ
    严格保密 (银行)    安全性        λ = 100-1000 (几乎无视性能)
    内容验证 (新闻)    平衡          λ = 1-10
    学术署名          灵活           λ = 0.1-1 (允许更多性能损失)

* * *

五、书写与表述问题
---------

### 问题 7：关键定义不严格

1. **定义 1.3**（释义攻击）缺少形式化：
   
   * "语义保持：Meaning(x) ≈ Meaning(x')" 是定性的，如何量化？
   * 建议用语义相似度阈值：$\cos(\text{BERT}(x), \text{BERT}(x')) > 0.85$

2. **定义 1.2**（信号-攻击解耦）过于抽象：
   
   * "对手能直接操纵的空间" $A_{direct}$ 如何定义？
   * 对 MoE 来说，对手若能访问 gating 网络权重（开源模型），则 $A_{direct}$ 不是空集
   * 需要澄清：本论文假设对手**无法直接修改模型**，只能通过输入级释义攻击

### 问题 8：符号与术语不一致

* 第 2 节用 $Z_{KGW}$ 和 $\Delta Z_{KGW}$，第 4 节用 $D^*$，但两者的量纲和可比性未明确
* "$c = \frac{\epsilon}{\sqrt{\gamma}}$" 与 "$D^*(p_0, p_1) = c^2\gamma$" 的对应关系需详细说明

* * *

六、修改优先级清单
---------

### 第一优先级（必须在发表前修正）

* [ ] **补充完整的对比实验**（第 6 节）：至少 5 种攻击方式 × 3 种模型
* [ ] **给出 Theorem 4.4 的紧界分析**：说明理论预测与实验的 gap
* [ ] **补充 Lipschitz 常数的实测数据**（表格）
* [ ] **明确所有假设条件的适用范围**：特别是"均匀替换"、"离散激活"等

### 第二优先级（发表前强烈建议）

* [ ] **补充第 4.3 节的离散激活分布处理**（新引理 4.4'）
* [ ] **完善第 7 节标定方法**：从文字转为具体数据和代码示例
* [ ] **改进定义的严格性**：量化 Meaning, Lipschitz, 等

### 第三优先级（发表后可改进）

* [ ] 对其他模型架构（Transformer、稠密模型）的推广
* [ ] 更复杂攻击模式的分析（多步骤蒸馏、对抗样本）

* * *

七、建议的补充章节框架
-----------

    新增 Section 4.5: Limitation and Gap Analysis
    ├─ 理论预测与实验的 gap 来源分析
    ├─ 第二阶项的影响量化
    └─ 对非 Top-k 激活模式的讨论
    
    新增 Section 6.3: Ablation Studies  
    ├─ 各个常数 (L_g, C_prop, C_stab) 对鲁棒性的独立影响
    ├─ 超参数敏感性分析
    └─ 攻击强度 γ 的多种估算方法对比
    
    新增 Appendix A: Complete Calibration Data
    └─ 表格：LLaMA-7B, 70B, Mixtral, DeepSeek 等的所有参数

* * *

八、核心建议总结
--------

| 维度        | 当前状态       | 评分   | 修改难度 | 优先级 |
| --------- | ---------- | ---- | ---- | --- |
| **理论新颖性** | 高（次线性vs线性） | 8/10 | 低    | —   |
| **理论严谨性** | 中偏低（多个跳跃）  | 5/10 | 中    | 高   |
| **实验验证**  | 无          | 0/10 | 高    | 最高  |
| **工程可用性** | 框架有但缺数据    | 4/10 | 中    | 高   |
| **可读性**   | 符号多，逻辑链条长  | 6/10 | 低    | 中   |

**总体意见**：论文在**理论框架**上有价值，但**实验验证严重不足**，理论证明中存在**多个逻辑跳跃需要加强**。建议在补充充分的实验验证和理论细节后重新投稿。当前形式**不建议发表**。
